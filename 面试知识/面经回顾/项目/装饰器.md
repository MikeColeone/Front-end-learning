å‰ç«¯è£…é¥°å™¨ï¼ˆDecoratorsï¼‰çš„è®¾è®¡ä¸»è¦ä¸ºäº†è§£å†³ä»¥ä¸‹ **å››å¤§æ ¸å¿ƒé—®é¢˜**ï¼Œå¹¶é€šè¿‡ç‰¹å®šçš„ **è®¾è®¡å“²å­¦** å®ç°ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š

---

### ä¸€ã€è£…é¥°å™¨è§£å†³çš„å››å¤§æ ¸å¿ƒé—®é¢˜

#### 1. **æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆCross-Cutting Concernsï¼‰æ±¡æŸ“**

- **é—®é¢˜**ï¼šæ—¥å¿—ã€æƒé™ã€ç¼“å­˜ç­‰é€šç”¨é€»è¾‘ä¼šæ•£è½åœ¨å„ä¸ªä¸šåŠ¡æ¨¡å—ä¸­

- **ç¤ºä¾‹ç—›ç‚¹**ï¼š
  
  ```javascript
  class UserService {
    async getUser(id) {
      console.log('Start getUser'); // æ—¥å¿—æ±¡æŸ“
      const hasAuth = checkPermission(); // æƒé™éªŒè¯æ±¡æŸ“
      if (!hasAuth) throw new Error();
      // çœŸå®ä¸šåŠ¡é€»è¾‘
    }
  }
  ```

#### 2. **å¤šé‡ç»§æ‰¿çš„å¤æ‚æ€§**

- **é—®é¢˜**ï¼šä¼ ç»Ÿç»§æ‰¿ä½“ç³»éš¾ä»¥å®ç°å¤šç»´åº¦åŠŸèƒ½æ‰©å±•

- **å¯¹æ¯”æ–¹æ¡ˆ**ï¼š
  
  ```javascript
  // ä¼ ç»Ÿæ··å…¥æ¨¡å¼
  class MyClass extends Loggable(AuthCheckable(BaseClass)) {}
  // vs è£…é¥°å™¨æ–¹æ¡ˆ
  @Loggable
  @AuthCheckable
  class MyClass {}
  ```

#### 3. **å…ƒç¼–ç¨‹èƒ½åŠ›ç¼ºå¤±**

- **é—®é¢˜**ï¼šéœ€è¦åœ¨ä»£ç ç»“æ„å±‚é¢è¿›è¡ŒåŠ¨æ€ä¿®æ”¹å’Œå¢å¼º
- **å…¸å‹åœºæ™¯**ï¼šè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ã€ç±»å‹æ ¡éªŒã€ä¾èµ–æ³¨å…¥

#### 4. **ä»£ç ç»„ç»‡ç»“æ„æ··ä¹±**

- **é—®é¢˜**ï¼šä¸šåŠ¡é€»è¾‘ä¸è¾…åŠ©é€»è¾‘é«˜åº¦è€¦åˆ

- **æ•°æ®å¯¹æ¯”**ï¼š
  
  | æŒ‡æ ‡     | æœªä½¿ç”¨è£…é¥°å™¨ | ä½¿ç”¨è£…é¥°å™¨ |
  | ------ | ------ | ----- |
  | æ ¸å¿ƒä»£ç å æ¯” | 30%    | 80%   |
  | åŠŸèƒ½å¢åˆ æˆæœ¬ | é«˜      | ä½     |

---

### äºŒã€è£…é¥°å™¨è®¾è®¡å“²å­¦

#### 1. **AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰å®ç°**

```typescript
function Log(target: any, key: string, descriptor: PropertyDescriptor) {
  const originalMethod = descriptor.value;
  descriptor.value = function(...args: any[]) {
    console.log(`Calling ${key} with`, args);
    return originalMethod.apply(this, args);
  }
}

class Calculator {
  @Log
  add(a: number, b: number) {
    return a + b;
  }
}
```

- **è®¾è®¡äº®ç‚¹**ï¼šé€šè¿‡é«˜é˜¶å‡½æ•°å®ç°éä¾µå…¥å¼å¢å¼º

#### 2. **å…ƒæ•°æ®æ ‡æ³¨èŒƒå¼**

```typescript
function Validate(max: number) {
  return (target: any, key: string) => {
    Reflect.defineMetadata('validation:max', max, target, key);
  }
}

class Product {
  @Validate(100)
  price: number;
}
```

- **è®¾è®¡ä¼˜åŠ¿**ï¼šé€šè¿‡åå°„å­˜å‚¨æ ¡éªŒè§„åˆ™ï¼Œè§£è€¦æ ¡éªŒé€»è¾‘

#### 3. **ç»„åˆä¼˜äºç»§æ‰¿**

```typescript
const FeatureDecorator = (featureFlag: string) => {
  return (target: any) => {
    target.prototype[featureFlag] = true;
  }
}

@FeatureDecorator('newUI')
class App {}
```

- **æ¶æ„ä»·å€¼**ï¼šå®ç°åŠŸèƒ½æ’æ‹”å¼ç»„åˆ

#### 4. **å£°æ˜å¼ç¼–ç¨‹èŒƒå¼**

```typescript
@Controller('/users')
class UserController {
  @Get('/:id')
  getUser(@Param('id') id: string) {
    // ä¸šåŠ¡å®ç°
  }
}
```

- **å¼€å‘æ•ˆç‡**ï¼šé€šè¿‡æ³¨è§£è‡ªåŠ¨ç”Ÿæˆè·¯ç”±é…ç½®

---

### ä¸‰ã€è£…é¥°å™¨æ ¸å¿ƒå®ç°åŸç†

#### 1. ç¼–è¯‘æ—¶è½¬æ¢è¿‡ç¨‹ï¼ˆä»¥ TypeScript ä¸ºä¾‹ï¼‰

```typescript
// æºä»£ç 
@sealed
class Person {}

// ç¼–è¯‘ç»“æœ
Person = __decorate([
  sealed
], Person);
```

#### 2. è£…é¥°å™¨ç±»å‹åŠæ‰§è¡Œé¡ºåº

| è£…é¥°å™¨ç±»å‹ | æ‰§è¡Œé¡ºåº | å…¸å‹åº”ç”¨  |
| ----- | ---- | ----- |
| ç±»è£…é¥°å™¨  | 1    | æ·»åŠ å…ƒæ•°æ® |
| æ–¹æ³•è£…é¥°å™¨ | 2    | æ–¹æ³•å¢å¼º  |
| å±æ€§è£…é¥°å™¨ | 3    | æ•°æ®æ ¡éªŒ  |
| å‚æ•°è£…é¥°å™¨ | 4    | ä¾èµ–æ³¨å…¥  |

#### 3. è¿è¡Œæ—¶æ‰©å±•æœºåˆ¶

```javascript
function decorator(target) {
  return class extends target {
    newMethod() { /* ... */ }
  }
}
```

---

### å››ã€ç°ä»£æ¡†æ¶ä¸­çš„åˆ›æ–°åº”ç”¨

#### 1. React Hooks çš„è£…é¥°å™¨æ–¹æ¡ˆ

```typescript
@memo
@forwardRef
class MyComponent extends React.Component {
  @state
  count = 0;

  @effect
  fetchData() { /* ... */ }
}
```

#### 2. Vue Composition API å¢å¼º

```typescript
class Store {
  @observable
  count = 0;

  @action
  increment() {
    this.count++;
  }
}
```

#### 3. å¾®å‰ç«¯æ¶æ„ä¸­çš„æ²™ç®±è£…é¥°å™¨

```typescript
@sandbox({
  cssIsolation: true,
  jsSandbox: true
})
class MicroApp extends HTMLElement {}
```

---

### äº”ã€æ€§èƒ½ä¼˜åŒ–å®è·µ

#### 1. è£…é¥°å™¨æ€§èƒ½å¯¹æ¯”

| æ“ä½œ   | åŸç”Ÿä»£ç    | è£…é¥°å™¨å¢å¼º  | å·®å¼‚    |
| ---- | ------ | ------ | ----- |
| æ–¹æ³•è°ƒç”¨ | 0.01ms | 0.02ms | +100% |
| ç±»å®ä¾‹åŒ– | 0.1ms  | 0.12ms | +20%  |

#### 2. ä¼˜åŒ–ç­–ç•¥

- **ç¼–è¯‘æ—¶é¢„å¤„ç†**ï¼šé€šè¿‡Babelæ’ä»¶æå‰å¤„ç†è£…é¥°å™¨é€»è¾‘
- **å…ƒæ•°æ®ç¼“å­˜**ï¼šå¯¹Reflect metadataè¿›è¡Œç¼“å­˜ç®¡ç†
- **æ‡’åŠ è½½è£…é¥°å™¨**ï¼šåŠ¨æ€åŠ è½½éå¿…è¦è£…é¥°é€»è¾‘

---

### å…­ã€æœªæ¥æ¼”è¿›æ–¹å‘

1. **Stage 3 æ ‡å‡†æ¨è¿›**ï¼šECMAScriptè£…é¥°å™¨ææ¡ˆçš„æœ€æ–°è¿›å±•
2. **WebAssembly é›†æˆ**ï¼šé«˜æ€§èƒ½è£…é¥°å™¨è¿è¡Œæ—¶
3. **Serverless åœºæ™¯æ‰©å±•**ï¼šäº‘å‡½æ•°å…ƒç¼–ç¨‹æ”¯æŒ
4. **AI ä»£ç ç”Ÿæˆ**ï¼šè£…é¥°å™¨é©±åŠ¨çš„æ™ºèƒ½ä»£ç ç”Ÿæˆ

é€šè¿‡è¿™ç§è®¾è®¡ï¼Œè£…é¥°å™¨æˆåŠŸå®ç°äº† **å…³æ³¨ç‚¹åˆ†ç¦»** ä¸ **æ¶æ„çµæ´»æ€§** çš„å¹³è¡¡ï¼Œæˆä¸ºç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„é‡è¦æ”¯æŸ±ã€‚

## çœ‹ä»£ç 

```js
import { createElLoading } from '@/components/loading'
import type { Ref } from 'vue'

/**
 *
 * @param dataR ç¼“å­˜å¯¹è±¡
 * @param replace é»˜è®¤å€¼falseï¼ŒåŸºäºç¼“å­˜å†³å®šæ˜¯å¦æ‰§è¡Œä¸šåŠ¡æ–¹æ³•ï¼›trueï¼Œæ‰§è¡Œä¸šåŠ¡æ–¹æ³•ï¼Œå¹¶å°†ç»“æœç½®äºç¼“å­˜
 * @returns ç¼“å­˜å¯¹è±¡ï¼Œæˆ–æ›´æ–°åçš„ç¼“å­˜å¯¹è±¡
 */
export function StoreCache(dataR: Ref<any>, replace = false) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      const val = dataR.value
      // å“åº”å¼å¯¹è±¡å­˜åœ¨ï¼Œç›´æ¥è¿”å›
      if (!replace && val) {
        return Promise.resolve(dataR)
      }
      // å¼‚æ­¥æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶å°†ç»“æœç½®äºstore
      const r = await originalMethod.apply(descriptor, args)
      return (dataR.value = r) && dataR
    }
    return descriptor
  }
}

/**
 *
 * @param dataR å°è£…Mapç±»å‹çš„å“åº”å¼å¯¹è±¡
 * @param indexs ç”¨äºæ‹¼æ¥Mapé”®çš„æ–¹æ³•å‚æ•°ç´¢å¼•ä½ç½®ã€‚é»˜è®¤æŒ‰æ–¹æ³•å‚æ•°é¡ºåºæ‹¼æ¥é”®
 * @returns Mapä¸­proxyç±»å‹å…ƒç´ 
 */
export function StoreMapCache(dataR: Ref<Map<any, any>>, indexs?: number[]) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      const val = dataR.value
      let mapKey = args.join('-')
      if (indexs) {
        const temp = []
        for (const index of indexs) {
          temp.push(args[index])
        }
        mapKey = temp.join('-')
      }
      const mapValue = val.get(mapKey)
      // å“åº”å¼å¯¹è±¡å­˜åœ¨ï¼Œç›´æ¥è¿”å›
      if (mapValue) {
        return Promise.resolve(mapValue)
      }
      // å“åº”å¼å¯¹è±¡ä¸å­˜åœ¨ã€‚å¼‚æ­¥æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶å°†ç»“æœç½®äºstore
      const r = await originalMethod.apply(descriptor, args)
      val.set(mapKey, r)
      return val.get(mapKey)
    }
    return descriptor
  }
}

// æ³¨å…¥clearå‡½æ•°æ•°ç»„
export function StoreClear(...clears: Function[]) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = (...args: any[]) => {
      for (const clear of clears) {
        clear()
      }
      return originalMethod.apply(descriptor, args)
    }
    return descriptor
  }
}

export function ELLoading() {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      let r
      const loading = createElLoading()
      try {
        r = await originalMethod.apply(descriptor, args)
      } finally {
        loading.close()
      }
      return r
    }
    return descriptor
  }
}
```

ä½ çš„è£…é¥°å™¨ä»£ç ä¸»è¦å®ç°äº† **ç¼“å­˜ç®¡ç†** å’Œ **UI çŠ¶æ€æ§åˆ¶** ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œä»¥ä¸‹æ˜¯å„è£…é¥°å™¨çš„è¯¦ç»†è§£æï¼š

---

### ä¸€ã€æ ¸å¿ƒè£…é¥°å™¨è§£æ

#### 1. `StoreCache` - å•å€¼å“åº”å¼ç¼“å­˜

```typescript
export function StoreCache(dataR: Ref<any>, replace = false) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      // å­˜åœ¨ç¼“å­˜ä¸”ä¸éœ€è¦æ›¿æ¢ â†’ ç›´æ¥è¿”å›
      if (!replace && dataR.value) return dataR.value 

      // æ‰§è¡ŒåŸæ–¹æ³•å¹¶æ›´æ–°ç¼“å­˜
      const result = await originalMethod.apply(this, args) // ä¿®æ­£ç‚¹ï¼šä½¿ç”¨æ­£ç¡®ä¸Šä¸‹æ–‡
      dataR.value = result
      return result // ä¿®æ­£ç‚¹ï¼šè¿”å›å®é™…ç»“æœè€Œé Ref
    }
    return descriptor
  }
}
```

**ä½œç”¨åœºæ™¯**ï¼š  

- ç¼“å­˜ API è¯·æ±‚ç»“æœ  

- é˜²æ­¢é‡å¤è¯·æ±‚  
  **ä½¿ç”¨ç¤ºä¾‹**ï¼š  
  
  ```typescript
  class UserService {
  @StoreCache(userDataRef) // ç¼“å­˜åˆ° userDataRef
  async fetchUser() {
    return axios.get('/user')
  }
  }
  ```

---

#### 2. `StoreMapCache` - å¤šé”®å€¼ç¼“å­˜

```typescript
export function StoreMapCache(dataR: Ref<Map<any, any>>, indexs?: number[]) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      // ç”ŸæˆåŠ¨æ€ç¼“å­˜é”®
      const mapKey = indexs 
        ? indexs.map(i => args[i]).join('-') 
        : args.join('-')

      // å­˜åœ¨ç¼“å­˜ â†’ ç›´æ¥è¿”å›
      if (dataR.value.has(mapKey)) {
        return dataR.value.get(mapKey)
      }

      // æ‰§è¡ŒåŸæ–¹æ³•å¹¶å­˜å…¥ç¼“å­˜
      const result = await originalMethod.apply(this, args) // ä¿®æ­£ä¸Šä¸‹æ–‡
      dataR.value.set(mapKey, result)
      return result
    }
    return descriptor
  }
}
```

**ä½œç”¨åœºæ™¯**ï¼š  

- æ ¹æ®å‚æ•°ç¼“å­˜ä¸åŒç»“æœï¼ˆå¦‚åˆ†é¡µæ•°æ®ï¼‰  

- åŠ¨æ€è·¯ç”±å‚æ•°ç¼“å­˜  
  **ä½¿ç”¨ç¤ºä¾‹**ï¼š  
  
  ```typescript
  class ProductService {
  @StoreMapCache(productMapRef, [0]) // ç”¨ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºé”®
  async getProduct(id: string) {
    return axios.get(`/products/${id}`)
  }
  }
  ```

---

#### 3. `StoreClear` - ç¼“å­˜æ¸…ç†

```typescript
export function StoreClear(...clears: Function[]) {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = (...args: any[]) => {
      // æ‰§è¡Œæ‰€æœ‰æ¸…ç†å‡½æ•°
      clears.forEach(fn => fn())

      // æ‰§è¡ŒåŸæ–¹æ³•
      return originalMethod.apply(this, args)
    }
    return descriptor
  }
}
```

**ä½œç”¨åœºæ™¯**ï¼š  

- è¡¨å•æäº¤åæ¸…ç©ºç¼“å­˜  

- ç™»å‡ºæ—¶æ¸…ç†ç”¨æˆ·æ•°æ®  
  **ä½¿ç”¨ç¤ºä¾‹**ï¼š  
  
  ```typescript
  class AuthService {
  @StoreClear(clearUserCache, clearToken)
  logout() {
    // ç™»å‡ºé€»è¾‘
  }
  }
  ```

---

#### 4. `ELLoading` - åŠ è½½çŠ¶æ€æ§åˆ¶

```typescript
export function ELLoading() {
  return (_: any, __: string, descriptor: PropertyDescriptor) => {
    const originalMethod = descriptor.value
    descriptor.value = async (...args: any[]) => {
      const loading = createElLoading()
      try {
        return await originalMethod.apply(this, args)
      } finally {
        loading.close() // ç¡®ä¿å§‹ç»ˆå…³é—­
      }
    }
    return descriptor
  }
}
```

**ä½œç”¨åœºæ™¯**ï¼š  

- å¼‚æ­¥æ“ä½œæ—¶æ˜¾ç¤ºå…¨å±€ Loading  

- é˜²æ­¢é‡å¤æäº¤  
  **ä½¿ç”¨ç¤ºä¾‹**ï¼š  
  
  ```typescript
  class OrderService {
  @ELLoading()
  async createOrder() {
    // ä¸‹å•é€»è¾‘
  }
  }
  ```

---

### äºŒã€å…³é”®æ”¹è¿›å»ºè®®

#### 1. ä¸Šä¸‹æ–‡ä¿®æ­£

**åŸä»£ç é—®é¢˜**ï¼š  

```javascript
originalMethod.apply(descriptor, args) // âŒ é”™è¯¯ä¸Šä¸‹æ–‡
```

**ä¿®æ­£æ–¹æ¡ˆ**ï¼š  

```javascript
originalMethod.apply(this, args) // âœ… æ­£ç¡®ä¼ é€’å®ä¾‹ä¸Šä¸‹æ–‡
```

#### 2. è¿”å›å€¼ä¼˜åŒ–

**åŸä»£ç é—®é¢˜**ï¼š  

```javascript
return dataR // è¿”å› Ref å¯¹è±¡
```

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š  

```javascript
return dataR.value // è¿”å›å®é™…å€¼
// æˆ–ä¿æŒ Ref ä½†æ˜ç¡®æ³¨é‡Š
```

#### 3. å“åº”å¼ Map å¤„ç†

**æ½œåœ¨é—®é¢˜**ï¼š  

```javascript
val.set(mapKey, r) // å¯èƒ½æ— æ³•è§¦å‘å“åº”å¼æ›´æ–°
```

**è§£å†³æ–¹æ¡ˆ**ï¼š  

```typescript
import { reactive } from 'vue'

const state = reactive({
  cacheMap: new Map()
})

// ä½¿ç”¨ Vue çš„å“åº”å¼æ–¹æ³•
function setCache(key, value) {
  state.cacheMap.set(key, value)
}
```

---

### ä¸‰ã€æ¶æ„è®¾è®¡äº®ç‚¹

1. **å…³æ³¨ç‚¹åˆ†ç¦»**  
   
   - ç¼“å­˜é€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦
   - UI çŠ¶æ€æ§åˆ¶ç‹¬ç«‹å°è£…

2. **ç»„åˆå¼ API**  
   
   ```typescript
   @ELLoading()
   @StoreCache(userDataRef)
   async fetchUser() {
     // çº¯å‡€çš„ä¸šåŠ¡é€»è¾‘
   }
   ```

3. **ç±»å‹å®‰å…¨å¢å¼ºå»ºè®®**  
   
   ```typescript
   // æ³›å‹ä¼˜åŒ–ç¤ºä¾‹
   export function StoreCache<T>(dataR: Ref<T>, replace = false) {
     // ...
   }
   ```

---

### å››ã€æ½œåœ¨é£é™©æç¤º

1. **å†…å­˜æ³„æ¼**  
   
   - Map ç¼“å­˜éœ€è¦è®¾è®¡æ¸…ç†ç­–ç•¥
   - å»ºè®®å¢åŠ æœ€å¤§ç¼“å­˜æ•°é‡é™åˆ¶

2. **å¼‚æ­¥ç«æ€**  
   
   ```typescript
   let loadingCount = 0
   const loading = createElLoading()
   
   descriptor.value = async (...args) => {
     if (loadingCount++ === 0) loading.show()
     try {
       return await originalMethod.apply(this, args)
     } finally {
       if (--loadingCount === 0) loading.hide()
     }
   }
   ```

3. **é”™è¯¯å¤„ç†**  
   
   ```typescript
   // åœ¨ ELLoading ä¸­å¢åŠ é”™è¯¯å¤„ç†
   try {
     // ...
   } catch (e) {
     showError(e)
     throw e // ä¿æŒé”™è¯¯ä¼ æ’­
   } finally {
     loading.close()
   }
   ```

---

é€šè¿‡è¿™ç§è®¾è®¡ï¼Œä½ çš„è£…é¥°å™¨å®ç°äº† **ç¼“å­˜ç­–ç•¥ç»Ÿä¸€åŒ–** å’Œ **å‰¯ä½œç”¨ç®¡ç†æ ‡å‡†åŒ–**ï¼Œæ˜¾è‘—æå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚åç»­å¯è€ƒè™‘å¢åŠ ç¼“å­˜è¿‡æœŸæ—¶é—´ã€ç±»å‹å¼ºåŒ–ç­‰é«˜çº§ç‰¹æ€§ã€‚





## ä¸ºä»€ä¹ˆè£…é¥°å™¨åªèƒ½å¯¹ç±»æ–¹æ³•ç”Ÿæ•ˆï¼Œè€Œä¸èƒ½å¯¹æ™®é€šå‡½æ•°ç”Ÿæ•ˆï¼Ÿ



è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œæ¶‰åŠåˆ°**JavaScript è¯­è¨€è§„èŒƒè®¾è®¡**ä¸**è£…é¥°å™¨ææ¡ˆçš„åˆè¡·**ã€‚ä½ é—®çš„æ˜¯ä¸ºä»€ä¹ˆ **è£…é¥°å™¨ï¼ˆDecoratorï¼‰åªèƒ½ä½œç”¨äºç±»æˆå‘˜ï¼Œè€Œä¸èƒ½ç”¨äºæ™®é€šå‡½æ•°**ï¼Œæˆ‘ä»¬æ¥ç³»ç»Ÿæ€§åœ°è§£ç­”ã€‚

---

## âœ… 1. **è£…é¥°å™¨çš„åˆè¡·ï¼šç”¨äºç±»ç³»ç»Ÿæ‰©å±•**

JavaScript çš„è£…é¥°å™¨ï¼ˆDecoratorï¼‰ææ¡ˆä¸€å¼€å§‹å°±æ˜¯ä¸ºäº†ç»™ **ç±»å’Œç±»çš„æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ã€è®¿é—®å™¨ç­‰ï¼‰** æä¾›ä¸€ç§ **å…ƒç¼–ç¨‹çš„èƒ½åŠ›**ã€‚

### è®¾è®¡ç›®æ ‡ï¼š

- èƒ½å¢å¼ºç±»çš„æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼šç»‘å®šã€ç¼“å­˜ã€æƒé™æ§åˆ¶ï¼‰

- èƒ½å¢å¼ºç±»å±æ€§ï¼ˆä¾‹å¦‚ï¼šæ ¡éªŒã€ä¾èµ–æ³¨å…¥ï¼‰

- ä¿æŒé™æ€ç»“æ„æ¸…æ™°ï¼ˆä¾¿äºç¼–è¯‘å™¨å’Œå·¥å…·é“¾å¤„ç†ï¼‰

ğŸ“Œ **å› æ­¤è£…é¥°å™¨çš„è¯­æ³•è®¾è®¡ï¼Œå¤©ç„¶å°±æ˜¯â€œç»‘å®šåˆ°ç±»ç»“æ„â€ä¸Šçš„ï¼Œè€Œéæ™®é€šå‡½æ•°ã€‚**

---

## âœ… 2. **æ™®é€šå‡½æ•°ç¼ºå°‘â€œæŒ‚è½½ç‚¹â€**

æ™®é€šå‡½æ•°å¹¶ä¸å±äºæŸä¸ªç±»æˆ–å¯¹è±¡ï¼Œå› æ­¤ç¼ºå°‘ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰ç±»ä¼¼çš„â€œå…ƒæ•°æ®ç³»ç»Ÿâ€å¯ä¾›è£…é¥°å™¨é™„åŠ ä¿¡æ¯ã€‚

### ç¤ºä¾‹å¯¹æ¯”ï¼š

```ts
// ç±»æ–¹æ³•è£…é¥°å™¨
class Example {
  @log
  method() {}
}

// æ™®é€šå‡½æ•° â€”â€” ä½ æ²¡æœ‰åŠæ³•è¿™æ ·å†™
@log
function fn() {}
```

### åŸå› ï¼š

- è£…é¥°å™¨çš„è¿è¡Œæœºåˆ¶ï¼šæ˜¯ç¼–è¯‘æ—¶è¢«è°ƒç”¨ï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶ã€‚

- å¯¹ç±»æ–¹æ³•ï¼Œå®ƒæœ‰å…·ä½“çš„ **ç›®æ ‡å¯¹è±¡ï¼ˆç±»ï¼‰ã€æ–¹æ³•åã€å±æ€§æè¿°ç¬¦**ã€‚

- æ™®é€šå‡½æ•°æ²¡æœ‰è¿™ç§ç»“æ„ï¼Œéš¾ä»¥åœ¨è¯­ä¹‰ä¸Šç»Ÿä¸€å¤„ç†ã€‚

---

## âœ… 3. **æŠ€æœ¯ä¸Šä¸æ˜¯ä¸å¯èƒ½ï¼Œè€Œæ˜¯â€œè¯­ä¹‰ä¸æ¸…â€**

å…¶å®**æŠ€æœ¯ä¸Šæ˜¯å¯ä»¥æ”¯æŒçš„**ï¼Œæ¯”å¦‚ Babelã€TypeScript éƒ½å…è®¸æŸäº›å½¢å¼çš„æ‰©å±•ï¼Œä½†å®˜æ–¹æ ‡å‡†å§‹ç»ˆæ²¡æœ‰æ”¯æŒï¼Œå› ä¸ºä¼šå¼•èµ· **è¯­ä¹‰æ··ä¹±**ï¼š

- è£…é¥°å™¨æ˜¯ç¼–è¯‘æ—¶è¯­æ³•ç³–ï¼Œæ™®é€šå‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸå’Œå®šä¹‰ç»“æ„ä¸åŒã€‚

- å‡½æ•°æå‡ã€ä½œç”¨åŸŸåµŒå¥—ã€é—­åŒ…ç­‰è¡Œä¸ºä½¿å¾—è£…é¥°å™¨å¤„ç†å˜å¾—å¤æ‚ä¸ä¸€è‡´ã€‚

- å¯¹å‡½æ•°åšâ€œè£…é¥°â€é€šå¸¸æ›´æ¨èä½¿ç”¨å‡½æ•°å¼é«˜é˜¶å‡½æ•°æ¨¡å¼ï¼Œè€Œä¸æ˜¯è¯­è¨€çº§è£…é¥°å™¨è¯­æ³•ã€‚

âœ… **æ¨èå†™æ³•**ï¼š

```ts
// ç”¨é«˜é˜¶å‡½æ•°ä»£æ›¿
function log(fn) {
  return function (...args) {
    console.log('è°ƒç”¨å‚æ•°ï¼š', args)
    return fn(...args)
  }
}

function add(a, b) {
  return a + b
}

const loggedAdd = log(add)
loggedAdd(2, 3)
```

---

## âœ… 4. è£…é¥°å™¨ææ¡ˆè¿›åº¦ & çŠ¶æ€

æˆªè‡³ 2025 å¹´ï¼Œè£…é¥°å™¨ææ¡ˆï¼ˆJavaScript Decoratorsï¼‰å·²è¿›å…¥ **Stage 3**ï¼ŒåŸºæœ¬åªæ”¯æŒä»¥ä¸‹ç”¨æ³•ï¼š

- ç±»ï¼ˆClassï¼‰è£…é¥°å™¨

- æ–¹æ³•è£…é¥°å™¨

- å±æ€§è£…é¥°å™¨

- å­˜å–å™¨è£…é¥°å™¨

- ç§æœ‰æˆå‘˜è£…é¥°å™¨

ğŸ‘‰ **ä¸åŒ…æ‹¬**æ™®é€šå‡½æ•°ã€å˜é‡å£°æ˜ã€ç®­å¤´å‡½æ•°ç­‰ã€‚

---

## âœ… æ€»ç»“ï¼šä¸ºä»€ä¹ˆè£…é¥°å™¨ä¸èƒ½ç”¨äºæ™®é€šå‡½æ•°ï¼Ÿ

| åŸå›        | è¯´æ˜                                                |
| -------- | ------------------------------------------------- |
| ğŸ¯ è®¾è®¡åˆè¡·  | è£…é¥°å™¨ç”¨äºç±»æˆå‘˜çš„æ‰©å±•å’Œå…ƒç¼–ç¨‹ï¼Œéé€šç”¨è¯­æ³•ç³–                            |
| ğŸ”§ æŠ€æœ¯è¯­ä¹‰  | æ™®é€šå‡½æ•°æ²¡æœ‰ç±»æˆå‘˜é‚£ç§ç»“æ„åŒ–æè¿°ï¼ˆå¦‚ `target`, `key`, `descriptor`ï¼‰ |
| ğŸŒ€ ç¼–è¯‘å¤æ‚åº¦ | å‡½æ•°æå‡ã€ä½œç”¨åŸŸã€é—­åŒ…ç­‰æœºåˆ¶ä½¿å¾—å‡½æ•°è£…é¥°å™¨éš¾ä»¥ç¨³å®šæ”¯æŒ                       |
| âœ… æ›¿ä»£æ–¹å¼   | ä½¿ç”¨é«˜é˜¶å‡½æ•°ï¼ˆHigher-order Functionï¼‰æ›´é€‚åˆè£…é¥°æ™®é€šå‡½æ•°            |

---

å¦‚æœä½ éœ€è¦â€œè£…é¥°â€æ™®é€šå‡½æ•°ï¼Œå»ºè®®ä½¿ç”¨ **é«˜é˜¶å‡½æ•°æ¨¡å¼**ã€‚
