é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionï¼‰æ˜¯å¯¹æ™®é€šå‡½æ•°è¿›è¡Œâ€œè£…é¥°â€çš„ä¸€ç§å¸¸ç”¨æ¨¡å¼ï¼Œå®ƒæ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­å®ç°å‡½æ•°å¤ç”¨ã€é€»è¾‘å¢å¼ºçš„å…³é”®å·¥å…·ã€‚åœ¨ JavaScript ä¸­ï¼Œé«˜é˜¶å‡½æ•°æ˜¯**æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªæ–°å‡½æ•°çš„å‡½æ•°**ã€‚

---

## âœ… ä¸€ã€æ ¸å¿ƒæ€æƒ³

**ä½ ä¼ å…¥ä¸€ä¸ªåŸå§‹å‡½æ•°ï¼ˆå¦‚ `fn`ï¼‰ï¼Œè¿”å›ä¸€ä¸ªå¢å¼ºç‰ˆçš„æ–°å‡½æ•°ï¼ˆå¦‚ `wrappedFn`ï¼‰ã€‚**

```ts
function decorator(fn) {
  return function (...args) {
    console.log('è£…é¥°å™¨å‰é€»è¾‘')
    const result = fn(...args)
    console.log('è£…é¥°å™¨åé€»è¾‘')
    return result
  }
}
```

---

## âœ… äºŒã€åŸºç¡€ç¤ºä¾‹ï¼šæ—¥å¿—è£…é¥°å™¨

```ts
function logDecorator(fn) {
  return function (...args) {
    console.log(`è°ƒç”¨ ${fn.name} å‚æ•°:`, args)
    const result = fn(...args)
    console.log(`è°ƒç”¨ ${fn.name} ç»“æœ:`, result)
    return result
  }
}

function add(a, b) {
  return a + b
}

const loggedAdd = logDecorator(add)
loggedAdd(3, 5)
// è¾“å‡ºï¼šè°ƒç”¨ add å‚æ•°: [3, 5]
// è¾“å‡ºï¼šè°ƒç”¨ add ç»“æœ: 8
```

---

## âœ… ä¸‰ã€å‚æ•°åŒ–è£…é¥°å™¨ï¼ˆå¸¦é…ç½®çš„ï¼‰

```ts
function timeLogger(label = 'å‡½æ•°æ‰§è¡Œ') {
  return function (fn) {
    return function (...args) {
      console.time(label)
      const result = fn(...args)
      console.timeEnd(label)
      return result
    }
  }
}

function slowAdd(a, b) {
  for (let i = 0; i < 1e6; i++) {} // æ¨¡æ‹Ÿè€—æ—¶
  return a + b
}

const timedAdd = timeLogger('åŠ æ³•')(slowAdd)
timedAdd(2, 3)
```

---

## âœ… å››ã€ç»„åˆå¤šä¸ªè£…é¥°å™¨

ä½ è¿˜å¯ä»¥ç»„åˆå¤šä¸ªè£…é¥°å™¨ï¼Œå°±åƒä¸­é—´ä»¶ä¸€æ ·ï¼š

```ts
function withLog(fn) {
  return function (...args) {
    console.log('è°ƒç”¨å‰')
    const result = fn(...args)
    console.log('è°ƒç”¨å')
    return result
  }
}

function withValidate(fn) {
  return function (...args) {
    if (args.some(arg => typeof arg !== 'number')) {
      throw new Error('å‚æ•°å¿…é¡»æ˜¯æ•°å­—')
    }
    return fn(...args)
  }
}

function multiply(a, b) {
  return a * b
}

const enhancedMultiply = withLog(withValidate(multiply))
enhancedMultiply(2, 4) // æ­£å¸¸
// enhancedMultiply(2, 'a') // æŠ¥é”™
```

---

## âœ… äº”ã€ç®­å¤´å‡½æ•°ä¹Ÿå¯ä»¥è¢«è£…é¥°

```ts
const greet = name => `Hello, ${name}`

const upperCaseDecorator = fn => name => fn(name).toUpperCase()

const loudGreet = upperCaseDecorator(greet)

console.log(loudGreet('world')) // "HELLO, WORLD"
```

---

## âœ… å…­ã€å®æˆ˜åœºæ™¯

| åœºæ™¯    | è¯´æ˜                           |
| ----- | ---------------------------- |
| æ—¥å¿—è®°å½•  | è®°å½•å‡½æ•°è°ƒç”¨å‰åçš„ä¿¡æ¯                  |
| å¼‚å¸¸æ•è·  | è‡ªåŠ¨ try-catch é”™è¯¯å¤„ç†            |
| æƒé™æ ¡éªŒ  | åˆ¤æ–­ç”¨æˆ·æƒé™æ˜¯å¦å…è®¸æ‰§è¡Œ                 |
| ç¼“å­˜è¿”å›å€¼ | è®°å¿†åŒ–å‡½æ•°ï¼ˆmemoizationï¼‰           |
| å»¶è¿Ÿæ‰§è¡Œ  | è®¾å®š delay/throttle/debounce ç­‰ |

---

## âœ… ä¸ƒã€æ€»ç»“

| è£…é¥°æ‰‹æ®µ                       | è¯´æ˜                    |
| -------------------------- | --------------------- |
| **é«˜é˜¶å‡½æ•°**                   | åŸç”Ÿ JS ä¸­å¯¹æ™®é€šå‡½æ•°è¿›è¡Œå¢å¼ºçš„æœ€ä½³æ–¹å¼ |
| **è£…é¥°å™¨è¯­æ³•ï¼ˆ@ï¼‰**               | é™å®šäºç±»/ç±»æˆå‘˜ï¼Œéæ™®é€šå‡½æ•°        |
| **ç»“åˆ useCallbackã€useMemo** | React ä¸­é«˜é˜¶å‡½æ•°ä¹Ÿå¸¸ç”¨äºæ€§èƒ½ä¼˜åŒ–   |

---

### ğŸ’¡å°ç»“ä¸€å¥è¯ï¼š

> **é«˜é˜¶å‡½æ•° = æ‹¿ä¸€ä¸ªå‡½æ•°ï¼ŒåŠ ç‚¹æ–™ï¼Œå†è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚**

å¦‚æœä½ æœ‰å…·ä½“ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚è¦å°è£…æƒé™ã€ç¼“å­˜ã€èŠ‚æµç­‰å‡½æ•°è£…é¥°å™¨ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™å‡ºå®Œæ•´ä¾‹å­ã€‚æ˜¯å¦è¦ä¸€ä¸ªå®æˆ˜ç‰ˆæœ¬ï¼Ÿæ¯”å¦‚â€œèŠ‚æµå‡½æ•°è£…é¥°å™¨â€ï¼Ÿ
